
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Subversion: set property to multiple & existent files - Fractions on my timeline</title>
  <meta name="author" content="Haggai Philip Zagury">

  
  <meta name="description" content="In continuation to my post earlier this month, regarding setting a automatic property to a file in svn. The issue I dealt with in that post was a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hagzag.github.io/blog/2008/11/08/subversion-propertyset">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Fractions on my timeline" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38752767-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner">

<hgroup>
	<!-- <div class="left" style="float:left; width: 128px; height: 128px;"> -->
		<img src="/images/Line-chart-icon.png" alt="icon">
	<!-- </div>	 -->
  	<!-- <div class="right" style="float:left; position: relative;"> -->
	  <h1><a href="/">Fractions on my timeline</a></h1>
	  
	    <h2>My "journeys", challenges and stuff I want to say</h2>
	  
  	<!-- </div>	 -->
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hagzag.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Subversion: Set Property to Multiple & Existent Files</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-08T19:14:00+05:30" pubdate data-updated="true">Nov 8<span>th</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img class="left" src="/assets/images/subversion.jpg" title="'Subversion Logo'" >In continuation to my post earlier this month, regarding setting a automatic property to a file in svn. The issue I dealt with in that post was a property set that would be given only to newly created files, meaning only new files with the given extension would receive the specific type of property. What I encountered now was a case where I had to set a specific property on a large number of files which were already committed to svn.</p>

<p>Well, one could spend a week locating those files and setting the properties manually but the elegant way would be to write a short shell script which will do the job for you.</p>

<p>so because I had multiple locations I chose to run the script on the server itself so I am not hanging on http protocol + I am using svn file and not http but this can be easily done by via http too.</p>

<p>So if your svn is build out of trunk, branches and tags so I would like to go over trunk for example and checkout first level directories look for a file extension and change its property (of course If you want to set more then one property you will have to modify this script) then set its property and commit so I created a file containing the names of the first level directories after trunk and out them into a file called trunk.list</p>

<p>Task list:
1. checkout from svn
2. find files with extension .properties (or any other extention I/you desire)</p>

<ol>
<li>set svn property eol CRLF</li>
<li>commit change to svn</li>
</ol>


<p>So I wrote in bash a short loop that would read the file and for each line do the four tasks I wanted:</p>

<pre><code> #!/bin/bash

 #set vars
 SVNUSER=opencm
 SVNPASS=opencm
 file=$2
 cat $file | while read line;
 do
 # "now" var will be used for commit message
 now=`date +%Y_%m_%d_%T`
 # checkout
 svn co --username $SVNUSER --password $SVNPASS file:///path-to-svnroot/trunk/$line /tmp/$line
 cd /tmp/$line
 # set the property of CRLF to the found files
 find&amp;nbsp; /tmp/$line -name "*.$1" | xargs -r svn propset svn:eol-style CRLF
 # commit the changes to svn
 svn commit -m "setting svnprop eol=CRLF done on $now"
 # remove eorking copy
 rm /tmp/$line -Rf

 done
 exit 0

 #EOF
</code></pre>

<p>to execute the command you need to command line args $1 file extension for example txt and $2 is the list of the directories you are checking out of svn so from command prompt it should look like:</p>

<pre><code>[opencm@localhost ]# ./chgCRLFprop.bash txt trunk.list
</code></pre>

<p>And if you really want to continue working in the process add this &ldquo;> chgCRLFprop.log 2>&amp;1 &amp;&rdquo; to the end of the command which will send the job to the background and you can also reference the log if you like.</p>

<p>Give it a test run first running the script without the svn commit.</p>
</div>



  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Haggai Philip Zagury</span></span>

      








  


<time datetime="2008-11-08T19:14:00+05:30" pubdate data-updated="true">Nov 8<span>th</span>, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/property/'>Property</a>, <a class='category' href='/blog/categories/subversion/'>Subversion</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://hagzag.github.io/blog/2008/11/08/subversion-propertyset/" data-via="hagzag" data-counturl="http://hagzag.github.io/blog/2008/11/08/subversion-propertyset/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2008/11/08/dummy-post/" title="Previous Post: Dummy Post">&laquo; Dummy Post</a>
      
      
        <a class="basic-alignment right" href="/blog/2008/11/09/subversion-server-side-action/" title="Next Post: Subversion - server-side action - auto add property to file">Subversion - server-side action - auto add property to file &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="facebook_comments" aria-live="polite">
      <noscript>Please enable JavaScript to view the comments powered by facebook</a></noscript>
<div
  class="fb-comments"
  data-href="http://hagzag.github.io/blog/2008/11/08/subversion-propertyset/"
  data-num-posts="2"
  data-width="800"
  data-colorscheme="light" ></div>

    </div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <span>
  	<div class="linkedin">
		<a href="http://about.me/hagzag"><img src="/images/Aboutme_gray_logo.png" width="160" height="33" border="0" alt="View Haggai Philip Zagury's profile on About.me"></a>

  	<img src="/images/profile_large.png" alt="my_pic" width="150" height="150">
		<a href="http://il.linkedin.com/in/hagzag"><img src="http://www.linkedin.com/img/webpromo/btn_myprofile_160x33.png" width="160" height="33" border="0" alt="View Haggai Philip Zagury's profile on LinkedIn"></a>
	</div>
 </span>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/09/10/chef-server-entrprise-features-now-available-in-oss-version/">Chef Server Enterprise Features Now Available in OSS Version</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/20/book-review-Managing-Windows-Servers-with-Chef/">Book Review :: Managing Windows Servers With Chef by John Ewart</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/15/pamnamax-docker-management-for-humans/">PanaMax - Docker Management for Humans</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/19/JUC-2014-Hertzlia-overview/">Jenkins the Software Development Framework for Everyone [ JUC 2014 Hertzlia - Overview ]</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/25/image-cm-ground-packer/">Image CM From the Ground Up With Packer</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/hagzag">@hagzag</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hagzag',
            count: 5,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/hagzag?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>


<a href="http://internetdefenseleague.org"><img src="http://internetdefenseleague.org/images/badges/final/super_badge.png" alt="Member of The Internet Defense League" /></a>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Haggai Philip Zagury -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  //js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  js.src = "//connect.facebook.net/en_US/all.js#appId=222612811167194&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
